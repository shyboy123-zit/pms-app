# 원재료 마스터 데이터 수정/삭제 기능 추가

## 개요
이제 원재료 자체의 정보(자재명, 유형, 재고, 단위, 안전재고, 공급사)를 수정하거나 삭제할 수 있습니다!

## 추가된 기능

### 1. 원재료 정보 수정
- 원재료 테이블의 각 행에 **연필 아이콘** (수정) 버튼 추가
- 클릭하면 기존 정보가 입력된 모달이 열림
- 원하는 정보 수정 후 **"수정"** 버튼 클릭

**수정 가능한 항목:**
- 자재명
- 유형 (플라스틱, 금속, 도료, 부자재)
- 재고량
- 단위
- 안전재고
- 공급사

### 2. 원재료 삭제
- 원재료 테이블의 각 행에 **휴지통 아이콘** (삭제) 버튼 추가
- 클릭하면 확인 메시지 표시
- 확인 시 원재료 및 관련 사용 내역 삭제

## 변경 사항

### DataContext.jsx
**새로운 함수:**
```javascript
const deleteMaterial = async (id) => {
    const { error } = await supabase.from('materials').delete().eq('id', id);
    if (!error) setMaterials(materials.filter(m => m.id !== id));
};
```

**기존 함수 활용:**
- `updateMaterial(id, fields)` - 이미 구현되어 있었음

### Materials.jsx

**새로운 State:**
```javascript
const [isEditingMaterial, setIsEditingMaterial] = useState(false);     // 수정 모드 여부
const [editingMaterialId, setEditingMaterialId] = useState(null);      // 수정 중인 원재료 ID
```

**새로운 함수:**

#### `handleEditMaterial(material)`
- 수정 버튼 클릭 시 호출
- 기존 원재료 정보를 폼에 자동으로 채움
- 모달을 수정 모드로 오픈

#### `handleDeleteMaterial(material)`
- 삭제 버튼 클릭 시 호출
- 확인 메시지 표시 후 삭제
- 관련 사용 내역도 함께 삭제됨을 경고

#### `confirmMaterial()` (업데이트)
- 등록과 수정을 모두 처리하도록 변경
- `isEditingMaterial` 상태에 따라 add 또는 update 실행

**UI 변경:**
- 모달 제목: "신규 자재 등록" / "원재료 정보 수정"
- 버튼 텍스트: "등록" / "수정"
- 테이블에 수정/삭제 버튼 추가

## 사용 방법

### 원재료 정보 수정

1. **원재료관리** 페이지로 이동
2. 수정할 원재료 행에서 **연필 아이콘** 클릭
3. 모달이 열리며 기존 정보가 자동으로 채워짐
4. 원하는 정보 수정
   - 예: 안전재고를 50kg에서 100kg으로 변경
   - 예: 공급사명 변경
5. **"수정"** 버튼 클릭
6. ✅ "원재료 정보가 수정되었습니다" 알림

### 원재료 삭제

1. **원재료관리** 페이지로 이동
2. 삭제할 원재료 행에서 **휴지통 아이콘** 클릭
3. 확인 메시지:
   - `'플라스틱 원료' 원재료를 삭제하시겠습니까?`
   - `삭제 시 관련 사용 내역도 함께 삭제됩니다.`
4. **확인** 클릭
5. ✅ "원재료가 삭제되었습니다" 알림

## 버튼 배치

각 원재료 행의 "작업" 컬럼에 다음 버튼들이 표시됩니다:

1. **연필 아이콘** (수정) - 원재료 정보 수정
2. **휴지통 아이콘** (삭제) - 원재료 삭제
3. **사용 등록** (파란색) - 원재료 사용 기록
4. **긴급 생산지시** (빨간색) - 재고 부족 시에만 표시

## 주의사항

⚠️ **삭제 시 주의**
- 원재료 삭제 시 관련된 모든 사용 내역도 함께 삭제됩니다
- 삭제는 되돌릴 수 없으므로 신중하게 진행하세요
- 실수로 삭제한 경우 수동으로 다시 등록해야 합니다

⚠️ **재고 수정**
- 재고를 직접 수정하면 사용 내역과 불일치가 발생할 수 있습니다
- 가능하면 "사용 등록" 기능을 통해 재고를 조정하세요
- 직접 수정은 입고, 재고 조사 등 특별한 경우에만 사용하세요

## 전체 기능 요약

### 원재료관리에서 할 수 있는 것:

1. ✅ **원재료 등록** - 새로운 원재료 추가
2. ✅ **원재료 수정** - 원재료 정보 변경 (NEW!)
3. ✅ **원재료 삭제** - 원재료 제거 (NEW!)
4. ✅ **사용 등록** - 작업 투입량 기록
5. ✅ **사용 내역 수정** - 잘못 입력한 사용량 수정
6. ✅ **사용 내역 삭제** - 잘못 입력한 사용 기록 삭제
7. ✅ **긴급 생산지시** - 재고 부족 시 발주

### 입출고관리에서 할 수 있는 것:

1. ✅ **입고 등록** - 제품 입고 기록
2. ✅ **출고 등록** - 제품 출고 기록
3. ✅ **거래 수정** - 잘못 입력한 입출고 수정
4. ✅ **거래 삭제** - 잘못 입력한 거래 삭제
5. ✅ **재고 현황** - 현재 재고 상태 조회
6. ✅ **날짜 필터** - 특정 기간 거래 내역 조회

---

✅ **완료!** 이제 모든 데이터를 자유롭게 수정/삭제할 수 있습니다!

## 테스트 방법

1. 원재료관리 페이지에서 "자재 등록" 클릭하여 테스트 원재료 추가
2. 테이블에서 연필 아이콘 클릭하여 정보 수정
3. 수정된 정보가 테이블에 반영되었는지 확인
4. 휴지통 아이콘 클릭하여 삭제 테스트
5. 원재료가 테이블에서 제거되었는지 확인
